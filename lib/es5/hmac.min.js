"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Date.now||(Date.now=function(){return(new Date).getTime()});var AcquiaHttpHmac=function(){function t(e){var n=e.realm,r=e.public_key,i=e.secret_key,s=e.version,o=void 0===s?"2.0":s,a=e.default_content_type,c=void 0===a?"application/json":a;if(_classCallCheck(this,t),!n)throw new Error('The "realm" must not be empty.');if(!r)throw new Error('The "public_key" must not be empty.');if(!i)throw new Error('The "secret_key" must not be empty.');var u=CryptoJS.enc.Base64.parse(i);this.config={realm:n,public_key:r,parsed_secret_key:u,version:o,default_content_type:c},this.SUPPORTED_METHODS=["GET","POST","PUT","DELETE","HEAD","OPTIONS","CUSTOM"]}return _createClass(t,[{key:"sign",value:function(t){var e=t.request,n=t.method,r=t.path,i=t.signed_headers,s=void 0===i?{}:i,o=t.content_type,a=void 0===o?this.config.default_content_type:o,c=t.body,u=void 0===c?"":c;if(!(e instanceof XMLHttpRequest))throw new Error("The request must be a XMLHttpRequest.");if(this.SUPPORTED_METHODS.indexOf(n)<0)throw new Error('The method must be "'+this.SUPPORTED_METHODS.join('" or "')+'". "'+n+'" is not supported.');if(!r)throw new Error("The end point path must not be empty.");var h=function(t){var e=arguments.length<=1||void 0===arguments[1]?"=":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],r=arguments.length<=3||void 0===arguments[3]?"&":arguments[3],i=[];for(var s in t)t.hasOwnProperty(s)&&i.push(""+s+e+t[s]+n);return i.join(r)},f=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)})},p=function(t,e){var n=["GET","HEAD"];return 0!==t.length&&n.indexOf(e)<0},l=f(),d=document.createElement("a"),y={id:this.config.public_key,nonce:l,realm:this.config.realm,version:this.config.version},g=Math.floor(Date.now()/1e3).toString(),m=p(u,n)?CryptoJS.SHA256(u).toString(CryptoJS.enc.Base64):"",v=p(u,n)?"\n"+a+"\n"+m:"";d.href=r;var _=d.port?":"+d.port:"",x=""+d.hostname+_,w=d.search.substring(1),S=n+"\n"+x+"\n"+d.pathname+"\n"+w+"\n"+h(y)+"\n"+g+v,H=h(y,'="','"',","),B=0===Object.keys(s).length?"":',headers="'+Object.keys(s).join()+'"',C=CryptoJS.HmacSHA256(S,this.config.parsed_secret_key).toString(CryptoJS.enc.Base64),b="acquia-http-hmac "+H+',signature="'+C+'"'+B;e.acquiaHttpHmac={},e.acquiaHttpHmac.timestamp=g,e.acquiaHttpHmac.nonce=l,e.setRequestHeader("X-Authorization-Timestamp",g),e.setRequestHeader("Authorization",b),m&&e.setRequestHeader("X-Authorization-Content-SHA256",m)}},{key:"hasValidResponse",value:function(t){var e=t.acquiaHttpHmac.nonce+"\n"+t.acquiaHttpHmac.timestamp+"\n"+t.responseText,n=CryptoJS.HmacSHA256(e,this.config.parsed_secret_key).toString(CryptoJS.enc.Base64),r=t.getResponseHeader("X-Server-Authorization-HMAC-SHA256");return n===r}}]),t}(),CryptoJS=CryptoJS||function(t,e){var n={},r=n.lib={},i=function(){},s=r.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=s.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;t>i;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;t>i;i+=4)e[r+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-8*(n%4),e.length=t.ceil(n/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;e>r;r+=4)n.push(4294967296*t.random()|0);return new o.init(n,e)}}),a=n.enc={},c=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++){var i=e[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-4*(r%8);return new o.init(n,e/2)}},u=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-8*(r%4);return new o.init(n,e)}},h=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},f=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,a=i/(4*s),a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*s,i=t.min(4*e,i),e){for(var c=0;e>c;c+=s)this._doProcessBlock(r,c);c=r.splice(0,e),n.sigBytes-=i}return new o.init(c,i)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=f.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=n.algo={};return n}(Math);!function(t){for(var e=CryptoJS,n=e.lib,r=n.WordArray,i=n.Hasher,n=e.algo,s=[],o=[],a=function(t){return 4294967296*(t-(0|t))|0},c=2,u=0;64>u;){var h;t:{h=c;for(var f=t.sqrt(h),p=2;f>=p;p++)if(!(h%p)){h=!1;break t}h=!0}h&&(8>u&&(s[u]=a(t.pow(c,.5))),o[u]=a(t.pow(c,1/3)),u++),c++}var l=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],c=n[4],u=n[5],h=n[6],f=n[7],p=0;64>p;p++){if(16>p)l[p]=0|t[e+p];else{var d=l[p-15],y=l[p-2];l[p]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+l[p-7]+((y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10)+l[p-16]}d=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&h)+o[p]+l[p],y=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&s^i&s),f=h,h=u,u=c,c=a+d|0,a=s,s=i,i=r,r=d+y|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+h|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=t.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(n),e.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var t=CryptoJS,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,i=4*r;n.sigBytes>i&&(n=t.finalize(n)),n.clamp();for(var s=this._oKey=n.clone(),o=this._iKey=n.clone(),a=s.words,c=o.words,u=0;r>u;u++)a[u]^=1549556828,c[u]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=CryptoJS,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var i=0;n>i;i+=3)for(var s=(e[i>>>2]>>>24-8*(i%4)&255)<<16|(e[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|e[i+2>>>2]>>>24-8*((i+2)%4)&255,o=0;4>o&&n>i+.75*o;o++)t.push(r.charAt(s>>>6*(3-o)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map,i=r.charAt(64);i&&(i=t.indexOf(i),-1!=i&&(n=i));for(var i=[],s=0,o=0;n>o;o++)if(o%4){var a=r.indexOf(t.charAt(o-1))<<2*(o%4),c=r.indexOf(t.charAt(o))>>>6-2*(o%4);i[s>>>2]|=(a|c)<<24-8*(s%4),s++}return e.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}();